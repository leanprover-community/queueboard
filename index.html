<!DOCTYPE html>
<html>
<head>
<meta name="referrer" content="no-referrer">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.datatables.net; style-src 'self' 'unsafe-inline' https://cdn.datatables.net; form-action 'none'; base-uri 'none'">
<title>Mathlib review and triage dashboard</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
	crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.css"
    integrity="sha384-eCorNQ6xLKDT9aok8iCYVVP8S813O3kaugZFLBt1YhfR80d1ZgkNcf2ghiTRzRno" crossorigin="anonymous">
<script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"
    integrity="sha384-cDXquhvkdBprgcpTQsrhfhxXRN4wfwmWauQ3wR5ZTyYtGrET2jd68wvJ1LlDqlQG" crossorigin="anonymous"></script>
<link rel='stylesheet' href='style.css'>
<base target="_blank">
</head>
<body>
  <h1>Mathlib review and triage dashboard</h1>
  <p>Welcome to the mathlib review and triage webpage! There are many ways to help, what are you looking for in particular?</p>
  
  <div class="btn-group">
    <a href="review_dashboard.html"><button>Review queue</button></a>
    <a href="maintainers_quick.html"><button>For maintainers (quick)</button></a>
    <a href="help_out.html"><button>Help out</button></a>
    <a href="triage.html"><button>Triage dashboard</button></a>
  </div><p></p>
  <div class="btn-group"><a href="on_the_queue.html"><button>Why is my PR not on the queue? Can I see all my PRs?</button></a></div><p></p>
  <div class="btn-group"><a href="triage.html#all"><button>What's going on? Just show me all open PRs, please!</button></a></div><p></p>
  
  <details>
    <summary>What do these buttons mean? Which page should I visit?</summary>
    <ul>
      <li>If you just want to see all open PRs, there is a <a href="triage.html#all">dashboard</a> just for you.</li>
      <li>Would you like to review some pull request? The <strong><a href="review_dashboard.html">review dashboard</a></strong> contains all PRs waiting for review. There are special sections for PRs by new contributors, labelled <em>easy</em> or addressing technical debt.</li>
      <li>Would you like to find out <strong>why</strong> your PR is (not) <strong>on the review queue</strong>? Are you interested in an overview of all your PRs with their status? <a href="on_the_queue.html">This webpage</a> contains all information necessary.</li>
      <li>There is a webpage for <strong>maintainers with little time</strong>: this contains e.g. all PRs which are just awaiting maintainer approval.
      If you actually have some more time at your hands, the <a href="review_dashboard.html">page for reviewers</a> or the <a href="triage.html">triage dashboard</a> should be useful.</li>
      <li>Would you just like to <strong>help out</strong>? <a href="help_out.html">This page</a> collects PRs where help was requested, or where some quick action can be useful.</li>
      <li>Are you coming here for <strong>PR triage</strong>: looking for PRs stuck in some state, and would like to move them along? The <a href="triage.html">triage dashboard</a> has the ultimate collection of all public information.</li>
      <!-- 'hidden' page for maintainers to assign reviewers must be generated locally, by running a script -->
    </ul>
  </details>
  <p>Feedback (including bug reports and ideas for improvements) on this dashboard is very welcome, for instance <a href="https://github.com/jcommelin/queueboard">directly on the github repository</a>.</p>
  <p><small>This dashboard was last updated on: March 19, 2025 at 04:06 UTC</small></p>

  <h2 id="tips-and-tricks">Tips and tricks</h2>
  <details><summary>Click here to see some tips and tricks for using these webpages.</summary>
  This page has a couple of hidden features. Some examples are:
  <ul>
  <li><strong>semantic sorting</strong>: clicking on a table column sorts by the column. This sorting is semantically correct: PR diffs are sorted by the total number of added or deleted lines, sorting by total time in review converts between months, days, hours and seconds</li>
  <li><strong>hovers</strong>: many items contain further information when you hover over it.
  Hover over a section header to see which PRs are contained in it, hover over a column definition to see what it measures, hover over a PR number to see its git branch name, hover over a time column to see the detailed time, etc.</li>
  <li><strong>author search</strong>: search for <code>author:name</code> to find all PRs by a particular author</li>
  <li><strong>exact label matching</strong>: a few label names are prefixes of other labels, e.g. <code>t-algebra</code> is a prefix of <code>t-algebraic geometry</code>, so searching for <code>t-algebra</code> will also find <code>t-algebraic geometry</code> PRs.
  There is special support for this combining: searching for <code>t-algebra$</code> will match only PRs with label <code>t-algebra</code>.</li>
  <li><strong>find PRs by modified file</strong>: search for a file name and find all PRs in a list which modify this file. Searching for several files finds all PRs which modify all these files. (Caveat: we only track the first 100 files each PR changes, so this may yield incomplete results for cross-cutting PRs. Such PRs are rare, however.)</li>
  <li><strong>find your PRs</strong>: searching for your user name returns all PRs you reviewed or commented on</li>
  <li><strong>search PR description</strong>: searching also searches a PR description, and the list of all users who ever commented on this PR. To find all PRs from the sphere-eversion project, searching for "sphere eversion" (or "sphere eversion") should do the trick.</li>
  <li><strong>configuration via URL</strong>: you can configure the initial sorting, search terms and number of entries per page by changing the URL you're visiting. Three short examples:
    <ul>
      <li><a href="review_dashboard.html?sort=13-desc#queue"><code>review_dashboard.html?sort=13-desc#queue</code></a> sorts the #queue table by total time in review (in descending order),</li>
      <li><a href="triage.html=?search=manifold&sort=author-asc&length=10#all"><code>triage.html=?search=manifold&sort=author-asc&length=10#all</code></a> shows all PRs which contain the string "manifold" in their entry or PR description, sorted by author (in ascending order), with 10 items per page, and</li>
      <li><a href="on_the_queue.html?search=jcommelin&length=100"><code>on_the_queue.html?search=jcommelin&length=100</code></a> shows the status of all PRs by <code>jcommelin</code></li>
    </ul>
  <details><summary>Reference-level explanation of search syntax</summary>
  The <code>search</code> parameter filters all tables on a page by default.
  The <code>sort</code> parameter changes the initial sorting of all dashboards; if the parameter is given several times, this configures a multi-column sort (sorting by the first parameter first). A valid value is of the form <code>idxOrAlias-direction</code>, where <code>direction</code> is either <code>asc</code> or <code>desc</code> (for ascending or descending order), and <code>idxOrAlias</code> describes the column to sort.
  Some columns have human-readable aliasses already (such as <code>number</code>, <code>author</code>, <code>title</code>, <code>labels</code> and <code>diff</code>); for the remaining ones, you <em>currently</em> need to use an index: <code>sort=13-desc</code> sorts the column with index 13 in descending order. These indices count hidden columns, so may change over time. Stable aliasses for the remaining columns will be added soon.
  </details>
  </li>
  <li><strong>filtering</strong>: click on a label or PR author to filter by this author</li>
  <li><strong>exact match when searching</strong>: searching for <code>foo bar</code> will match all PRs whose entry contains the string foo and the string bar (but at potentially different places). Searching for <code>"foo bar"</code> only yields literal occurrences of the string <code>foo bar</code></li>
  <li><strong>multi-column sorting</strong>: use shift-click to sort by a second (or third, etc.) column</li>
  </ul>

  Would you like to add a hidden feature? <a href="https://github.com/leanprover-community/queueboard/issues?q=is%3Aissue%20state%3Aopen%20label%3Ahas-mentoring-instructions">These features</a> have mentoring instructions; PRs are very welcome!
  </details>

<script>
  let diff_stat = DataTable.type('diff_stat', {
    detect: function (data) { return false; },
    order: {
      pre: function (data) {
        // Input has the form
        // <span style="color:green">42</span>/<span style="color:red">13</span>,
        // we extract the tuple (42, 13) and compute their sum 42+13.
        let parts = data.split('</span>/<span', 2);
        return Number(parts[0].slice(parts[0].search(">") + 1)) + Number(parts[1].slice(parts[1].search(">") + 1, -7));
      }
    },
  });
  let formatted_relativedelta = DataTable.type('formatted_relativedelta', {
    detect: function (data) { return data.startsWith('<div style="display:none">'); },
    order: {
      pre: function (data) {
        let main = (data.split('</div>', 2))[0].slice('<div style="display:none">'.length);
        // If there is no input data, main is the empty string.
        if (!main.includes('-')) {
            return -1;
        }
        const [days, seconds, ...rest] = main.split('-');
        return 100000 * Number(days) + Number(seconds);
      }
    }
  })

  // Return a table column index corresponding to a human-readable alias.
  // |aliasOrIdx| is supposed to be an integer or a string; |table_id| is a string.
  function getIdx (aliasOrIdx, table_id) {
    switch (aliasOrIdx) {
      case "number":
        return 0;
      case "author":
        return 1;
      case "title":
        return 2;
      // idx = 3 means the PR description, which is a hidden field
      case "labels":
        return 4;
      case "diff":
        return 5;
      // idx = 6 is the list of modified files
      case "numberChangedFiles":
        return 7;
      case "numberComments":
        return 8;
      // idx = 9 means the handles of users who commented or reviewed this PR
      // The following column indices depend on a dashboard's configuration;
      // we cannot use a uniform translation for all tables.
      // TODO: change this configuration depending on the table ID and
      // vary the table options accordingly.
      // Currently, most dashboards have the following indices; this can change in the future
      // 10 assignee(s), 11 last update (from Github), 12 last status change, 13 total time in review
      default:
        return aliasOrIdx;
    }
  }

$(document).ready( function () {
  // Parse the URL for any initial configuration settings.
  // Future: use this for deciding which table to apply the options to.
  let fragment = window.location.hash;
  const params = new URLSearchParams(document.location.search);
  const search_params = params.get("search");
  const pageLength = params.get("length") || 10;
  const sort_params = params.getAll("sort");
  // The configuration for initial sorting of tables.
  let sort_config = [];
  for (const config of sort_params) {
    if (!config.includes('-')) {
      console.log(`invalid value ${config} passed as sort parameter`);
      continue;
    }
    const [col, dir, ...rest] = config.split('-');
    if (dir != "asc" && dir != "desc") {
      console.log(`invalid sorting direction ${dir} passed as sorting configuration`);
      continue;
    }
    sort_config.push([getIdx(col, ""), dir]);
   }
  const options = {
    stateDuration: 0,
    pageLength: pageLength,
    "searching": true,
    columnDefs: [{ type: 'diff_stat', targets: 5 }, { visible: false, targets: [3, 6, 9] } ],
  };
  if (params.has("search")) {
    options.search = {
        search: search_params
    };
  }
  options.order = sort_config;
  $('table').DataTable(options);
});
</script>
</body>
</html>
