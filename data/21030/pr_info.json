{
  "data": {
    "repository": {
      "pullRequest": {
        "additions": 6,
        "assignees": {
          "nodes": []
        },
        "author": {
          "login": "mattrobball"
        },
        "autoMergeRequest": null,
        "baseRefName": "master",
        "body": "As @JovanGerb reminded me, we still have some places where supplied instance ordering can result in an unnecessarily unfolded term. `Quaternion.instDivisionRing` is one such. \n\nCo-authored-by: Jovan Gerbscheid <jovan.gerbscheid@gmail.com> \n\n---\n<!-- The text above the `---` will become the commit message when your\nPR is merged. Please leave a blank newline before the `---`, otherwise\nGitHub will format the text above it as a title.\n\nFor details on the \"pull request lifecycle\" in mathlib, please see:\nhttps://leanprover-community.github.io/contribute/index.html\n\nIn particular, note that most reviewers will only notice your PR\nif it passes the continuous integration checks.\nPlease ask for help on https://leanprover.zulipchat.com if needed.\n\nTo indicate co-authors, include lines at the bottom of the commit message\n(that is, before the `---`) using the following format:\n\nCo-authored-by: Author Name <author@email.com>\n\nIf you are moving or deleting declarations, please include these lines at the bottom of the commit message\n(that is, before the `---`) using the following format:\n\nMoves:\n- Vector.* -> List.Vector.*\n- ...\n\nDeletions:\n- Nat.bit1_add_bit1\n- ...\n\nAny other comments you want to keep out of the PR commit should go\nbelow the `---`, and placed outside this HTML comment, or else they\nwill be invisible to reviewers.\n\nIf this PR depends on other PRs, please list them below this comment,\nusing the following format:\n- [ ] depends on: #abc [optional extra text]\n- [ ] depends on: #xyz [optional extra text]\n\n-->\n\n[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)\n",
        "changedFiles": 1,
        "closed": true,
        "closedAt": "2025-02-02T14:25:29Z",
        "comments": {
          "nodes": [
            {
              "id": "IC_kwDOFcwZ1c6bwtHI",
              "body": "!bench",
              "createdAt": "2025-01-24T19:27:40Z",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6bwta2",
              "body": "### PR summary [204d44ed04](https://github.com/leanprover-community/mathlib4/pull/21030/commits/204d44ed04a6804d1b7ab71dc2327ae754d1db7e)\n\n#### Import changes for modified files\n\nNo significant changes to the import graph\n\n\n<details><summary>Import changes for all files</summary>\n\n|Files|Import difference|\n|-|-|\n\n</details>\n\n---\n\n#### Declarations diff\n\nNo declarations were harmed in the making of this PR! üêô\n<details>\n  <summary>You can run this locally as follows</summary>\n\n\n```bash\n## summary with just the declaration names:\n./scripts/declarations_diff.sh <optional_commit>\n\n## more verbose report:\n./scripts/declarations_diff.sh long <optional_commit>\n```\n</details>\n\nThe doc-module for `script/declarations_diff.sh` contains some details about this script.\n\n---\n\n<details><summary>No changes to technical debt.</summary>\n\nYou can run this locally as\n```\n./scripts/technical-debt-metrics.sh pr_summary\n```\n* The `relative` value is the weighted *sum* of the differences with weight given by the *inverse* of the current value of the statistic.\n* The `absolute` value is the `relative` value divided by the total sum of the inverses of the current values (i.e. the weighted *average* of the differences).\n</details>\n",
              "createdAt": "2025-01-24T19:28:30Z",
              "author": {
                "login": "github-actions"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6bw3qX",
              "body": "Here are the [benchmark results](https://speed.lean-lang.org/mathlib4/run-detail/03d17836-3320-44e1-84ad-127ccf11ee28) for commit 0e50112140e314f83616155f67cdc2264de202d0.\nThere were [significant changes](https://speed.lean-lang.org/mathlib4/compare/31d476bd-112f-423c-a893-c558594bf20c/to/03d17836-3320-44e1-84ad-127ccf11ee28) against commit 59eed68fe429e3b530ee79ce6109d7efbd9d8d98:\n```diff\n  Benchmark                     Metric         Change\n  ===================================================\n+ ~Mathlib.Algebra.Quaternion   instructions   -13.5%\n```",
              "createdAt": "2025-01-24T19:56:23Z",
              "author": {
                "login": "leanprover-bot"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6bw31m",
              "body": "|File|Instructions|%|\n|-|-:|:-:|\n|`build`|-30.706‚¨ù10‚Åπ|(-0.01%)|\n|`Mathlib.Algebra.Quaternion`|-35.188‚¨ù10‚Åπ|(-13.47%)|\n[CI run](https://github.com/leanprover-community/mathlib4/actions/runs/12956638852)",
              "createdAt": "2025-01-24T19:56:54Z",
              "author": {
                "login": "github-actions"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6bz2D0",
              "body": "Please add a comment: otherwise, LGTM.\r\nmaintainer delegate?",
              "createdAt": "2025-01-25T18:34:11Z",
              "author": {
                "login": "grunweg"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6bz2FI",
              "body": "üöÄ Pull request has been placed on the maintainer queue by grunweg.",
              "createdAt": "2025-01-25T18:34:28Z",
              "author": {
                "login": "github-actions"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6b1n_L",
              "body": "Thanks!  Adding a comment seems like a good idea.\r\n\r\nbors d+",
              "createdAt": "2025-01-26T17:52:16Z",
              "author": {
                "login": "adomani"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6b1n_a",
              "body": ":v: mattrobball can now approve this pull request. To approve and merge a pull request, simply reply with `bors r+`. More detailed instructions are available [here](https://bors.tech/documentation/getting-started/#reviewing-pull-requests).",
              "createdAt": "2025-01-26T17:52:18Z",
              "author": {
                "login": "mathlib-bors"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6cr-W2",
              "body": "@mattrobball, this declaration can be sped up even more (10x) in a different way: swapping the order of the fields `__ := Quaternion.instRing` and `__ := Quaternion.instGroupWithZero`. The reason is that the class `DivisionRing` is a direct extension of `Ring`, so by writing the `Ring` instance first, we get a much simpler definition of the instance.\r\n\r\nThis speedup also works with the original `rw` proofs.",
              "createdAt": "2025-02-01T04:55:32Z",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csTH3",
              "body": "Playing around with the order of instances feels brittle.\n\nI wonder whether this means that there is some part of core that should handle this differently, or whether it makes sense to systematically lint for similar situations everywhere.",
              "createdAt": "2025-02-01T08:42:19Z",
              "author": {
                "login": "adomani"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csTZN",
              "body": "I wouldn't call this changing the order of instances (since that sounds like it affects type class synthesis). This is just about the definition/value of this instance.",
              "createdAt": "2025-02-01T08:45:54Z",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csTs8",
              "body": "I don't really have a good name to refer to what you suggest, but I still find it brittle!  I would prefer if such changes had virtually no effect on performance.",
              "createdAt": "2025-02-01T08:49:09Z",
              "author": {
                "login": "adomani"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csT6J",
              "body": "What I noticed as the rule of thumb for this order is to put in the first place a substructure that is a direct substructure (so this is only counting the first structure that comes after the `extends`). I've only looked at the effect this has on the elaboration of the instance itself. But I can imagine it also gives performance benefits in unification later on.",
              "createdAt": "2025-02-01T08:51:25Z",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csUIf",
              "body": "It didn't look to me like there are too many places in Mathlib where this has a significant effect. This particular one has it very significantly though.",
              "createdAt": "2025-02-01T08:54:04Z",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csUY1",
              "body": "Let me also say that, although I find this brittle, I find it also very *interesting* that performance is affected so dramatically by this change.  I was simply suggesting that such a huge impact may be indicative of a general principle that could be an internal part of the machine, rather than applied locally.",
              "createdAt": "2025-02-01T08:56:54Z",
              "author": {
                "login": "adomani"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csfaJ",
              "body": "Thanks @JovanGerb. One would think I would remember these things. Did you do a pass for mis-ordered instances over all of mathlib? I was planning on doing this about a year ago (or adding a linter for it) but never got around to it. ",
              "createdAt": "2025-02-01T11:11:40Z",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6csxan",
              "body": "I think there are no misordered instances that have such a significant impact as this one. But there definitely are a few out there. Should they all be put in the correct order?",
              "createdAt": "2025-02-01T14:52:04Z",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6ctE5x",
              "body": "I think there are more structured plans to address these so cleaning up some as we hit them is ok but we probably shouldn't spend too much energy on something more systematic at the moment.",
              "createdAt": "2025-02-01T18:34:34Z",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6cuZAH",
              "body": "bors merge",
              "createdAt": "2025-02-02T13:55:33Z",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c6cubu8",
              "body": "Pull request successfully merged into master.\n\nBuild succeeded:\n  * [Build](https://github.com/leanprover-community/mathlib4/actions/runs/13099597292/job/36546189774)\n  * [Lint style](https://github.com/leanprover-community/mathlib4/actions/runs/13099597292/job/36546189871)",
              "createdAt": "2025-02-02T14:25:28Z",
              "author": {
                "login": "mathlib-bors"
              }
            }
          ]
        },
        "commits": {
          "nodes": [
            {
              "commit": {
                "oid": "0e50112140e314f83616155f67cdc2264de202d0",
                "additions": 9,
                "deletions": 6,
                "committedDate": "2025-01-24T19:22:13Z",
                "author": {
                  "name": "Matthew Ballard",
                  "email": "matt@mrb.email"
                },
                "statusCheckRollup": {
                  "contexts": {
                    "nodes": [
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIbRY0xg",
                        "name": "set_pr_emoji",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12977000187/job/36189910214"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIajnRCA",
                        "name": "Lint style (fork)",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956192081/job/36141912328"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIap8m5w",
                        "name": "Add ready-to-merge or delegated label",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12958342832/job/36148553447"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIbvl7hg",
                        "name": "Add ready-to-merge or delegated label",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12989141860/job/36221582214"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj1QLA",
                        "name": "Add topic label",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956263626/job/36142141484"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj1QJw",
                        "name": "label-and-report-new-contributor",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956263627/job/36142141479"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIap8nRQ",
                        "name": "Ping maintainers on Zulip",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12958342830/job/36148553541"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIbvl7hA",
                        "name": "Ping maintainers on Zulip",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12989141853/job/36221582212"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj1QTg",
                        "name": "post-or-update-summary-comment",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956263629/job/36142141518"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIap8nFA",
                        "name": "Fix style issues from lint",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12958342824/job/36148553492"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIbvl8Zg",
                        "name": "Fix style issues from lint",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12989141865/job/36221582438"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIajnQhQ",
                        "name": "Lint style",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956192090/job/36141912197"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj1RVg",
                        "name": "Lint style",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956263628/job/36142141782"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIajnPoQ",
                        "name": "Build (fork)",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956192081/job/36141911969"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIajnPZw",
                        "name": "Build",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956192090/job/36141911911"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj1QTw",
                        "name": "Check all files imported",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956263628/job/36142141519"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIajnR9w",
                        "name": "Post-CI job (fork)",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956192081/job/36141912567"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj-26g",
                        "name": "Post-CI job",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/12956192090/job/36142298858"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj1pKw",
                        "name": "New Contributor Check",
                        "conclusion": "NEUTRAL",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/runs/36142147883"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIaj2q1g",
                        "name": "Summary",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://dashboard.mergify.com/event-logs?pullRequestNumber=21030&login=leanprover-community&repository=mathlib4"
                      }
                    ]
                  }
                }
              }
            },
            {
              "commit": {
                "oid": "204d44ed04a6804d1b7ab71dc2327ae754d1db7e",
                "additions": 5,
                "deletions": 9,
                "committedDate": "2025-02-01T11:06:29Z",
                "author": {
                  "name": "Matthew Ballard",
                  "email": "matt@mrb.email"
                },
                "statusCheckRollup": {
                  "contexts": {
                    "nodes": [
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgk0hAg",
                        "name": "set_pr_emoji",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13099433295/job/36545831170"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgk0hrw",
                        "name": "set_pr_emoji",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13099433389/job/36545831343"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn2LA",
                        "name": "Lint style (fork)",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030674/job/36521506348"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgN_fpQ",
                        "name": "Add ready-to-merge or delegated label",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088223758/job/36521893797"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgPbvaw",
                        "name": "Add ready-to-merge or delegated label",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088960368/job/36523405163"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgX8UmQ",
                        "name": "Add ready-to-merge or delegated label",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13093228745/job/36532327577"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn4Bg",
                        "name": "label-and-report-new-contributor",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031159/job/36521506822"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgN_fqQ",
                        "name": "Ping maintainers on Zulip",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088223751/job/36521893801"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgPbvyA",
                        "name": "Ping maintainers on Zulip",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088960386/job/36523405256"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgX8UrA",
                        "name": "Ping maintainers on Zulip",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13093228741/job/36532327596"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn4Ew",
                        "name": "post-or-update-summary-comment",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031169/job/36521506835"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgN_fzA",
                        "name": "Fix style issues from lint",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088223756/job/36521893836"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgPbvjQ",
                        "name": "Fix style issues from lint",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088960366/job/36523405197"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgX8Ueg",
                        "name": "Fix style issues from lint",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13093228738/job/36532327546"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn1zQ",
                        "name": "Lint style",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030669/job/36521506253"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn4eg",
                        "name": "Lint style",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031152/job/36521506938"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn1Xw",
                        "name": "Build (fork)",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030674/job/36521506143"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn1Tg",
                        "name": "Build",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030669/job/36521506126"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn4Dw",
                        "name": "Check all files imported",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031152/job/36521506831"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNn2mQ",
                        "name": "Post-CI job (fork)",
                        "conclusion": "SKIPPED",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030674/job/36521506457"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNwkQQ",
                        "name": "Post-CI job",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030669/job/36521649217"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNoDzg",
                        "name": "New Contributor Check",
                        "conclusion": "NEUTRAL",
                        "status": "COMPLETED",
                        "detailsUrl": "https://github.com/leanprover-community/mathlib4/runs/36521509838"
                      },
                      {
                        "__typename": "CheckRun",
                        "id": "CR_kwDOFcwZ1c8AAAAIgNoOCw",
                        "name": "Summary",
                        "conclusion": "SUCCESS",
                        "status": "COMPLETED",
                        "detailsUrl": "https://dashboard.mergify.com/event-logs?pullRequestNumber=21030&login=leanprover-community&repository=mathlib4"
                      },
                      {
                        "__typename": "StatusContext",
                        "id": "SC_kwDOFcwZ1c8AAAAH6txOuQ",
                        "context": "bors",
                        "state": "SUCCESS",
                        "targetUrl": "https://mathlib-bors-ca18eefec4cb.herokuapp.com/batches/9044",
                        "description": "Build succeeded"
                      }
                    ]
                  }
                }
              }
            }
          ]
        },
        "createdAt": "2025-01-24T19:27:37Z",
        "deletions": 7,
        "files": {
          "nodes": [
            {
              "path": "Mathlib/Algebra/Quaternion.lean",
              "additions": 6,
              "deletions": 7
            }
          ]
        },
        "headRefName": "mrb/speed_up_quaternion",
        "headRefOid": "204d44ed04a6804d1b7ab71dc2327ae754d1db7e",
        "headRepository": {
          "name": "mathlib4",
          "owner": {
            "login": "leanprover-community"
          }
        },
        "headRepositoryOwner": {
          "login": "leanprover-community"
        },
        "id": "PR_kwDOFcwZ1c6I8Prb",
        "isCrossRepository": false,
        "isDraft": false,
        "labels": {
          "nodes": [
            {
              "id": "LA_kwDOFcwZ1c8AAAABAt13Ow",
              "color": "bfd4f2",
              "name": "delegated"
            },
            {
              "id": "LA_kwDOFcwZ1c8AAAABHuWjJg",
              "color": "06e039",
              "name": "ready-to-merge"
            },
            {
              "id": "LA_kwDOFcwZ1c8AAAABViJjTQ",
              "color": "33DBEC",
              "name": "t-algebra"
            }
          ]
        },
        "latestReviews": {
          "nodes": [
            {
              "id": "PRR_kwDOFcwZ1c6aSD4q",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "eric-wieser"
              },
              "submittedAt": "2025-02-01T22:58:51Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c6ZZvuT",
              "body": "Ew. Please add a comment for future reference",
              "state": "APPROVED",
              "author": {
                "login": "Ruben-VandeVelde"
              },
              "submittedAt": "2025-01-24T22:03:10Z"
            }
          ]
        },
        "maintainerCanModify": false,
        "mergeCommit": null,
        "mergeStateStatus": "UNKNOWN",
        "mergeable": "UNKNOWN",
        "mergedAt": null,
        "mergedBy": null,
        "milestone": null,
        "number": 21030,
        "potentialMergeCommit": null,
        "projectCards": {
          "nodes": []
        },
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "THUMBS_DOWN",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "LAUGH",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "HOORAY",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "CONFUSED",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "HEART",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "ROCKET",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "EYES",
            "users": {
              "nodes": []
            }
          }
        ],
        "reviewDecision": "APPROVED",
        "reviewRequests": {
          "nodes": []
        },
        "reviews": {
          "nodes": [
            {
              "id": "PRR_kwDOFcwZ1c6ZZvuT",
              "body": "Ew. Please add a comment for future reference",
              "state": "APPROVED",
              "author": {
                "login": "Ruben-VandeVelde"
              },
              "submittedAt": "2025-01-24T22:03:10Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c6ZgFTU",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "eric-wieser"
              },
              "submittedAt": "2025-01-27T12:37:25Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c6aRq4L",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "eric-wieser"
              },
              "submittedAt": "2025-02-01T11:37:51Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c6aRuBT",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "mattrobball"
              },
              "submittedAt": "2025-02-01T13:12:30Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c6aSD4q",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "eric-wieser"
              },
              "submittedAt": "2025-02-01T22:58:51Z"
            }
          ]
        },
        "reviewThreads": {
          "nodes": [
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5zEH-7",
                    "body": "Can you use `simp_rw` so that the proof remains inspectable? ",
                    "createdAt": "2025-01-27T12:37:25Z",
                    "author": {
                      "login": "eric-wieser"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5zh32S",
                    "body": "I assume `fast_instance%` now also solves this?",
                    "createdAt": "2025-02-01T11:37:51Z",
                    "author": {
                      "login": "eric-wieser"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5zh7cc",
                    "body": "I would guess so also but I didn't test. Do you want to use it? I think there is diminishing returns here.\n\nI also tried various mixtures of supplied instances but nothing seemed cleaner. \n\nMacro question is whether/when a synthesize instance should take precedent over (parts) of a supplied one. ",
                    "createdAt": "2025-02-01T13:12:30Z",
                    "author": {
                      "login": "mattrobball"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5ziQtp",
                    "body": "I think your change is ok. Using the elaborator has the advantage that changes to the hierarchy automatically result in the optimal choice here for downstream users, but the disadvantage of overhead to create the instance.",
                    "createdAt": "2025-02-01T22:58:51Z",
                    "author": {
                      "login": "eric-wieser"
                    }
                  }
                ]
              }
            }
          ]
        },
        "closingIssuesReferences": {
          "nodes": []
        },
        "participants": {
          "nodes": [
            {
              "id": "U_kgDOBfZl7g",
              "login": "mattrobball"
            },
            {
              "id": "MDQ6VXNlcjg1NjY4Mzk0",
              "login": "leanprover-bot"
            },
            {
              "id": "MDQ6VXNlcjEwMTA1MDE2",
              "login": "grunweg"
            },
            {
              "id": "MDQ6VXNlcjI5NDY3NzQ1",
              "login": "adomani"
            },
            {
              "id": "MDQ6VXNlcjU2MzU1MjQ4",
              "login": "JovanGerb"
            },
            {
              "id": "MDQ6VXNlcjQyNTI2MA==",
              "login": "eric-wieser"
            },
            {
              "id": "MDQ6VXNlcjY1NTE0MTMx",
              "login": "Ruben-VandeVelde"
            },
            {
              "id": "U_kgDOB75MNQ",
              "login": "leanprover-community-mathlib4-bot"
            }
          ]
        },
        "state": "CLOSED",
        "statusCheckRollup": {
          "contexts": {
            "nodes": [
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgk0hAg",
                "name": "set_pr_emoji",
                "conclusion": "SKIPPED",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13099433295/job/36545831170"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgk0hrw",
                "name": "set_pr_emoji",
                "conclusion": "SKIPPED",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13099433389/job/36545831343"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn2LA",
                "name": "Lint style (fork)",
                "conclusion": "SKIPPED",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030674/job/36521506348"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgN_fpQ",
                "name": "Add ready-to-merge or delegated label",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088223758/job/36521893797"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgPbvaw",
                "name": "Add ready-to-merge or delegated label",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088960368/job/36523405163"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgX8UmQ",
                "name": "Add ready-to-merge or delegated label",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13093228745/job/36532327577"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn4Bg",
                "name": "label-and-report-new-contributor",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031159/job/36521506822"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgN_fqQ",
                "name": "Ping maintainers on Zulip",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088223751/job/36521893801"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgPbvyA",
                "name": "Ping maintainers on Zulip",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088960386/job/36523405256"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgX8UrA",
                "name": "Ping maintainers on Zulip",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13093228741/job/36532327596"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn4Ew",
                "name": "post-or-update-summary-comment",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031169/job/36521506835"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgN_fzA",
                "name": "Fix style issues from lint",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088223756/job/36521893836"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgPbvjQ",
                "name": "Fix style issues from lint",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088960366/job/36523405197"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgX8Ueg",
                "name": "Fix style issues from lint",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13093228738/job/36532327546"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn1zQ",
                "name": "Lint style",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030669/job/36521506253"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn4eg",
                "name": "Lint style",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031152/job/36521506938"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn1Xw",
                "name": "Build (fork)",
                "conclusion": "SKIPPED",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030674/job/36521506143"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn1Tg",
                "name": "Build",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030669/job/36521506126"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn4Dw",
                "name": "Check all files imported",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088031152/job/36521506831"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNn2mQ",
                "name": "Post-CI job (fork)",
                "conclusion": "SKIPPED",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030674/job/36521506457"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNwkQQ",
                "name": "Post-CI job",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/actions/runs/13088030669/job/36521649217"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNoDzg",
                "name": "New Contributor Check",
                "conclusion": "NEUTRAL",
                "status": "COMPLETED",
                "detailsUrl": "https://github.com/leanprover-community/mathlib4/runs/36521509838"
              },
              {
                "__typename": "CheckRun",
                "id": "CR_kwDOFcwZ1c8AAAAIgNoOCw",
                "name": "Summary",
                "conclusion": "SUCCESS",
                "status": "COMPLETED",
                "detailsUrl": "https://dashboard.mergify.com/event-logs?pullRequestNumber=21030&login=leanprover-community&repository=mathlib4"
              },
              {
                "__typename": "StatusContext",
                "id": "SC_kwDOFcwZ1c8AAAAH6txOuQ",
                "context": "bors",
                "state": "SUCCESS",
                "targetUrl": "https://mathlib-bors-ca18eefec4cb.herokuapp.com/batches/9044",
                "description": "Build succeeded"
              }
            ]
          }
        },
        "title": "[Merged by Bors] - perf(Algebra.Quaternion): reorder instances in spread",
        "updatedAt": "2025-02-02T14:25:32Z",
        "url": "https://github.com/leanprover-community/mathlib4/pull/21030",
        "timelineItems": {
          "nodes": [
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "0e50112140e314f83616155f67cdc2264de202d0"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6bwtHI",
              "createdAt": "2025-01-24T19:27:40Z",
              "body": "!bench",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6bwta2",
              "createdAt": "2025-01-24T19:28:30Z",
              "body": "### PR summary [204d44ed04](https://github.com/leanprover-community/mathlib4/pull/21030/commits/204d44ed04a6804d1b7ab71dc2327ae754d1db7e)\n\n#### Import changes for modified files\n\nNo significant changes to the import graph\n\n\n<details><summary>Import changes for all files</summary>\n\n|Files|Import difference|\n|-|-|\n\n</details>\n\n---\n\n#### Declarations diff\n\nNo declarations were harmed in the making of this PR! üêô\n<details>\n  <summary>You can run this locally as follows</summary>\n\n\n```bash\n## summary with just the declaration names:\n./scripts/declarations_diff.sh <optional_commit>\n\n## more verbose report:\n./scripts/declarations_diff.sh long <optional_commit>\n```\n</details>\n\nThe doc-module for `script/declarations_diff.sh` contains some details about this script.\n\n---\n\n<details><summary>No changes to technical debt.</summary>\n\nYou can run this locally as\n```\n./scripts/technical-debt-metrics.sh pr_summary\n```\n* The `relative` value is the weighted *sum* of the differences with weight given by the *inverse* of the current value of the statistic.\n* The `absolute` value is the `relative` value divided by the total sum of the inverses of the current values (i.e. the weighted *average* of the differences).\n</details>\n",
              "author": {
                "login": "github-actions"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c6ngNUdzwAAAAO9ckWE",
              "createdAt": "2025-01-24T19:28:30Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABViJjTQ",
                "name": "t-algebra"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6bw3qX",
              "createdAt": "2025-01-24T19:56:23Z",
              "body": "Here are the [benchmark results](https://speed.lean-lang.org/mathlib4/run-detail/03d17836-3320-44e1-84ad-127ccf11ee28) for commit 0e50112140e314f83616155f67cdc2264de202d0.\nThere were [significant changes](https://speed.lean-lang.org/mathlib4/compare/31d476bd-112f-423c-a893-c558594bf20c/to/03d17836-3320-44e1-84ad-127ccf11ee28) against commit 59eed68fe429e3b530ee79ce6109d7efbd9d8d98:\n```diff\n  Benchmark                     Metric         Change\n  ===================================================\n+ ~Mathlib.Algebra.Quaternion   instructions   -13.5%\n```",
              "author": {
                "login": "leanprover-bot"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6bw31m",
              "createdAt": "2025-01-24T19:56:54Z",
              "body": "|File|Instructions|%|\n|-|-:|:-:|\n|`build`|-30.706‚¨ù10‚Åπ|(-0.01%)|\n|`Mathlib.Algebra.Quaternion`|-35.188‚¨ù10‚Åπ|(-13.47%)|\n[CI run](https://github.com/leanprover-community/mathlib4/actions/runs/12956638852)",
              "author": {
                "login": "github-actions"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c6ZZvuT",
              "createdAt": "2025-01-24T22:03:10Z",
              "body": "Ew. Please add a comment for future reference",
              "author": {
                "login": "Ruben-VandeVelde"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6bz2D0",
              "createdAt": "2025-01-25T18:34:11Z",
              "body": "Please add a comment: otherwise, LGTM.\r\nmaintainer delegate?",
              "author": {
                "login": "grunweg"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6bz2FI",
              "createdAt": "2025-01-25T18:34:28Z",
              "body": "üöÄ Pull request has been placed on the maintainer queue by grunweg.",
              "author": {
                "login": "github-actions"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c6ngNUdzwAAAAO9ul7t",
              "createdAt": "2025-01-25T18:34:28Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABh1mAHA",
                "name": "maintainer-merge"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6b1n_L",
              "createdAt": "2025-01-26T17:52:16Z",
              "body": "Thanks!  Adding a comment seems like a good idea.\r\n\r\nbors d+",
              "author": {
                "login": "adomani"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6b1n_a",
              "createdAt": "2025-01-26T17:52:18Z",
              "body": ":v: mattrobball can now approve this pull request. To approve and merge a pull request, simply reply with `bors r+`. More detailed instructions are available [here](https://bors.tech/documentation/getting-started/#reviewing-pull-requests).",
              "author": {
                "login": "mathlib-bors"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c6ngNUdzwAAAAO940Fh",
              "createdAt": "2025-01-26T17:52:27Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABAt13Ow",
                "name": "delegated"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c6ZgFTU",
              "createdAt": "2025-01-27T12:37:24Z",
              "body": "",
              "author": {
                "login": "eric-wieser"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6cr-W2",
              "createdAt": "2025-02-01T04:55:32Z",
              "body": "@mattrobball, this declaration can be sped up even more (10x) in a different way: swapping the order of the fields `__ := Quaternion.instRing` and `__ := Quaternion.instGroupWithZero`. The reason is that the class `DivisionRing` is a direct extension of `Ring`, so by writing the `Ring` instance first, we get a much simpler definition of the instance.\r\n\r\nThis speedup also works with the original `rw` proofs.",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "__typename": "MentionedEvent"
            },
            {
              "__typename": "SubscribedEvent"
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csTH3",
              "createdAt": "2025-02-01T08:42:19Z",
              "body": "Playing around with the order of instances feels brittle.\n\nI wonder whether this means that there is some part of core that should handle this differently, or whether it makes sense to systematically lint for similar situations everywhere.",
              "author": {
                "login": "adomani"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csTZN",
              "createdAt": "2025-02-01T08:45:54Z",
              "body": "I wouldn't call this changing the order of instances (since that sounds like it affects type class synthesis). This is just about the definition/value of this instance.",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csTs8",
              "createdAt": "2025-02-01T08:49:09Z",
              "body": "I don't really have a good name to refer to what you suggest, but I still find it brittle!  I would prefer if such changes had virtually no effect on performance.",
              "author": {
                "login": "adomani"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csT6J",
              "createdAt": "2025-02-01T08:51:25Z",
              "body": "What I noticed as the rule of thumb for this order is to put in the first place a substructure that is a direct substructure (so this is only counting the first structure that comes after the `extends`). I've only looked at the effect this has on the elaboration of the instance itself. But I can imagine it also gives performance benefits in unification later on.",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csUIf",
              "createdAt": "2025-02-01T08:54:04Z",
              "body": "It didn't look to me like there are too many places in Mathlib where this has a significant effect. This particular one has it very significantly though.",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csUY1",
              "createdAt": "2025-02-01T08:56:54Z",
              "body": "Let me also say that, although I find this brittle, I find it also very *interesting* that performance is affected so dramatically by this change.  I was simply suggesting that such a huge impact may be indicative of a general principle that could be an internal part of the machine, rather than applied locally.",
              "author": {
                "login": "adomani"
              }
            },
            {
              "__typename": "RenamedTitleEvent"
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "204d44ed04a6804d1b7ab71dc2327ae754d1db7e"
              }
            },
            {
              "__typename": "MentionedEvent"
            },
            {
              "__typename": "SubscribedEvent"
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csfaJ",
              "createdAt": "2025-02-01T11:11:40Z",
              "body": "Thanks @JovanGerb. One would think I would remember these things. Did you do a pass for mis-ordered instances over all of mathlib? I was planning on doing this about a year ago (or adding a linter for it) but never got around to it. ",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "__typename": "MentionedEvent"
            },
            {
              "__typename": "SubscribedEvent"
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c6aRq4L",
              "createdAt": "2025-02-01T11:37:51Z",
              "body": "",
              "author": {
                "login": "eric-wieser"
              }
            },
            {
              "__typename": "CrossReferencedEvent",
              "id": "CRE_kwDOFcwZ1c53FSjn",
              "createdAt": "2025-02-01T13:35:51Z",
              "source": {
                "id": "PR_kwDOFcwZ1c6Ju4Ch",
                "title": "[Merged by Bors] - perf: fix some slow declarations",
                "url": "https://github.com/leanprover-community/mathlib4/pull/21323"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6csxan",
              "createdAt": "2025-02-01T14:52:04Z",
              "body": "I think there are no misordered instances that have such a significant impact as this one. But there definitely are a few out there. Should they all be put in the correct order?",
              "author": {
                "login": "JovanGerb"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6ctE5x",
              "createdAt": "2025-02-01T18:34:34Z",
              "body": "I think there are more structured plans to address these so cleaning up some as we hit them is ok but we probably shouldn't spend too much energy on something more systematic at the moment.",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "__typename": "ReferencedEvent"
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6cuZAH",
              "createdAt": "2025-02-02T13:55:33Z",
              "body": "bors merge",
              "author": {
                "login": "mattrobball"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c6ngNUdzwAAAAPCyBsW",
              "createdAt": "2025-02-02T13:55:44Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABHuWjJg",
                "name": "ready-to-merge"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c6ngNUdzwAAAAPCyBs7",
              "createdAt": "2025-02-02T13:55:45Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABh1mAHA",
                "name": "maintainer-merge"
              }
            },
            {
              "__typename": "ReferencedEvent"
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c6cubu8",
              "createdAt": "2025-02-02T14:25:28Z",
              "body": "Pull request successfully merged into master.\n\nBuild succeeded:\n  * [Build](https://github.com/leanprover-community/mathlib4/actions/runs/13099597292/job/36546189774)\n  * [Lint style](https://github.com/leanprover-community/mathlib4/actions/runs/13099597292/job/36546189871)",
              "author": {
                "login": "mathlib-bors"
              }
            },
            {
              "__typename": "RenamedTitleEvent"
            },
            {
              "__typename": "ClosedEvent",
              "id": "CE_lADOFcwZ1c6ngNUdzwAAAAPCyRIq",
              "createdAt": "2025-02-02T14:25:29Z"
            },
            {
              "__typename": "HeadRefDeletedEvent",
              "id": "HRDE_lADOFcwZ1c6ngNUdzwAAAAPCyRJ6",
              "createdAt": "2025-02-02T14:25:32Z"
            }
          ]
        }
      }
    }
  }
}
