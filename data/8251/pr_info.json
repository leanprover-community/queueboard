{
  "data": {
    "repository": {
      "pullRequest": {
        "additions": 607,
        "assignees": {
          "nodes": []
        },
        "author": {
          "login": "sgouezel"
        },
        "autoMergeRequest": null,
        "baseRefName": "master",
        "body": "Towards general uniqueness results for the Haar measure, we introduce a new class of regular measures called `InnerRegular`, for measures which are inner regular with respect to compact sets. We also introduce `InnerRegularWRT` for more general classes of inner regular measures with properties to be prescribed, and `InnerRegularCompactLTTop` for measures which are regular for finite measure sets with respect to compact sets -- the latter property is the common denominator to the two main classes of Haar measures, the regular ones and the inner regular ones.\r\n\r\n---\r\n<!-- The text above the `---` will become the commit message when your\r\nPR is merged. Please leave a blank newline before the `---`, otherwise\r\nGitHub will format the text above it as a title.\r\n\r\nTo indicate co-authors, include lines at the bottom of the commit message\r\n(that is, before the `---`) using the following format:\r\n\r\nCo-authored-by: Author Name <author@email.com>\r\n\r\nAny other comments you want to keep out of the PR commit should go\r\nbelow the `---`, and placed outside this HTML comment, or else they\r\nwill be invisible to reviewers.\r\n\r\nIf this PR depends on other PRs, please list them below this comment,\r\nusing the following format:\r\n- [ ] depends on: #abc [optional extra text]\r\n- [ ] depends on: #xyz [optional extra text]\r\n-->\r\n\r\nI am afraid this PR will be pretty hard to review, as it is a substantial rewrite of the `Regular.lean`, with a lot of different properties of measures, and proofs that jump from one to the other. I have tried to explain the details of the design in the file-level docstring to help the reader. The API is pretty well fleshed out, as it is enough for all the forthcoming results on Haar measures in #8198. Unfortunately, I can't really carve out smaller PRs off this one.\r\n\r\n[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)\r\n",
        "changedFiles": 4,
        "closed": true,
        "closedAt": "2023-11-09T00:36:33Z",
        "comments": {
          "nodes": [
            {
              "id": "IC_kwDOFcwZ1c5rdWeZ",
              "body": "Thanks!\r\nbors r+",
              "createdAt": "2023-11-08T23:05:50Z",
              "author": {
                "login": "RemyDegenne"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c5rd01V",
              "body": "Pull request successfully merged into master.\n\nBuild succeeded:\n  * [Build](https://github.com/leanprover-community/mathlib4/actions/runs/6805434625/job/18504945358)\n  * [Check all files imported](https://github.com/leanprover-community/mathlib4/actions/runs/6805434625/job/18504945119)\n  * [Lint style](https://github.com/leanprover-community/mathlib4/actions/runs/6805434625/job/18504945249)",
              "createdAt": "2023-11-09T00:36:32Z",
              "author": {
                "login": "mathlib-bors"
              }
            }
          ]
        },
        "commits": {
          "nodes": [
            {
              "commit": {
                "oid": "b1a1a3e67c74b3ac7baa1b830bb483b8385c43f2",
                "additions": 554,
                "deletions": 184,
                "committedDate": "2023-11-07T17:53:49Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "fd62a9cdcacc6a71db805470477d31bae736c8b9",
                "additions": 19,
                "deletions": 8,
                "committedDate": "2023-11-07T18:16:27Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "16cda4cd7aecb1b317501bad12c3f5786c09beca",
                "additions": 6,
                "deletions": 9,
                "committedDate": "2023-11-07T19:10:18Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "07a341210e645ca8c6c961394ab397eb38d869bd",
                "additions": 11,
                "deletions": 0,
                "committedDate": "2023-11-07T19:39:07Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "31f7c07c450a22ece7e906a311e921eb5afd306c",
                "additions": 1,
                "deletions": 1,
                "committedDate": "2023-11-08T08:00:06Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "bf4c7a3bdc729dd80882940d61690dd1789e1dfb",
                "additions": 1204,
                "deletions": 987,
                "committedDate": "2023-11-08T10:32:56Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "ff2a9e06a2b477195ebbf2eed4df5c96784d1b7f",
                "additions": 4,
                "deletions": 4,
                "committedDate": "2023-11-08T17:08:14Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "0b08d812e2a56a4bc2b39ca9369c0351a4062d4c",
                "additions": 18,
                "deletions": 1,
                "committedDate": "2023-11-08T17:27:04Z",
                "author": {
                  "name": "sgouezel",
                  "email": "sebastien.gouezel@univ-rennes1.fr"
                },
                "statusCheckRollup": null
              }
            }
          ]
        },
        "createdAt": "2023-11-07T19:48:35Z",
        "deletions": 201,
        "files": {
          "nodes": [
            {
              "path": "Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.lean",
              "additions": 6,
              "deletions": 9
            },
            {
              "path": "Mathlib/MeasureTheory/Measure/MeasureSpace.lean",
              "additions": 19,
              "deletions": 8
            },
            {
              "path": "Mathlib/MeasureTheory/Measure/Regular.lean",
              "additions": 571,
              "deletions": 184
            },
            {
              "path": "docs/references.bib",
              "additions": 11,
              "deletions": 0
            }
          ]
        },
        "headRefName": "SG_regular",
        "headRefOid": "0b08d812e2a56a4bc2b39ca9369c0351a4062d4c",
        "headRepository": {
          "name": "mathlib4",
          "owner": {
            "login": "leanprover-community"
          }
        },
        "headRepositoryOwner": {
          "login": "leanprover-community"
        },
        "id": "PR_kwDOFcwZ1c5e2L-t",
        "isCrossRepository": false,
        "isDraft": false,
        "labels": {
          "nodes": [
            {
              "id": "LA_kwDOFcwZ1c8AAAABHuWjJg",
              "color": "06e039",
              "name": "ready-to-merge"
            },
            {
              "id": "LA_kwDOFcwZ1c8AAAABViJbOw",
              "color": "33DBEC",
              "name": "t-topology"
            },
            {
              "id": "LA_kwDOFcwZ1c8AAAABViJqVA",
              "color": "33DBEC",
              "name": "t-measure-probability"
            }
          ]
        },
        "latestReviews": {
          "nodes": [
            {
              "id": "PRR_kwDOFcwZ1c5mjlLY",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-11-08T15:12:25Z"
            }
          ]
        },
        "maintainerCanModify": false,
        "mergeCommit": null,
        "mergeStateStatus": "UNKNOWN",
        "mergeable": "UNKNOWN",
        "mergedAt": null,
        "mergedBy": null,
        "milestone": null,
        "number": 8251,
        "potentialMergeCommit": null,
        "projectCards": {
          "nodes": []
        },
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "THUMBS_DOWN",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "LAUGH",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "HOORAY",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "CONFUSED",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "HEART",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "ROCKET",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "EYES",
            "users": {
              "nodes": []
            }
          }
        ],
        "reviewDecision": null,
        "reviewRequests": {
          "nodes": []
        },
        "reviews": {
          "nodes": [
            {
              "id": "PRR_kwDOFcwZ1c5mfikg",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-11-08T07:16:05Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5mfxux",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-11-08T07:58:00Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5mgH8Q",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-11-08T08:45:20Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5mjWcA",
              "body": "It looks good!",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-11-08T15:03:03Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5mjlLY",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-11-08T15:12:25Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5mku89",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-11-08T17:27:28Z"
            }
          ]
        },
        "reviewThreads": {
          "nodes": [
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5Snl6w",
                    "body": "This docstring mentions compact closed sets, but the definition of InnerRegular is only about compact sets (not necessarily closed). I am curious about this because in the proof of Kolmogorov's extension theorem, we realized with Peter Pfaffelhuber that if we did not want to make assumptions like T2space, what we needed was regularity with respect to compact and closed sets (we obtain these compact closed sets as closures of compact sets).\r\nRelated to that, you also recently added `ClosableCompactSubsetOpenSpace` and it looks like the intended use of your new definitions in our case would be to use InnerRegular as you define it w.r.t. compact sets (not necessarily closed), then prove that the assumptions we have on our space imply `ClosableCompactSubsetOpenSpace` and use `exists_compact_closed_between`. Does that sound right?",
                    "createdAt": "2023-11-08T07:16:05Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5Snvfl",
                    "body": "It's exactly that. The natural inner regularity assumption would be with respect to compact closed sets, and I started a refactor like that, but then I thought it would be too big a departure from existing literature, so I switched back only to compact sets (and forgot to adjust the docstring here). In the main application, to locally compact topological groups, it doesn't make a difference, because the topology is then automatically regular: this implies `ClosableCompactSubsetOpenSpace`, so regularity with respect to compact sets, or with respect to compact closed sets, is equivalent.",
                    "createdAt": "2023-11-08T07:58:00Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5Sn-H_",
                    "body": "Thanks for the clarification. I was also thinking about trying a closed-and-compact refactor for inner regular, but it was a daunting prospect. I'll review this pr to understand better how the various definitions you introduce interact.",
                    "createdAt": "2023-11-08T08:45:19Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5Sp_qC",
                    "body": "Can you add `InnerRegularWRT.rfl` for the case `p=q`, and `InnerRegularWRT.mono` that concludes `InnerRegularWRT µ p' q'` from `InnerRegularWRT µ p q` and the right implications between p/p' and q/q'?",
                    "createdAt": "2023-11-08T14:48:09Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5Sq4h9",
                    "body": "Good idea, done.",
                    "createdAt": "2023-11-08T17:27:27Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5SqBbG",
                    "body": "```suggestion\r\ninner regular for some property `p` and all measurable sets, then the measure itself is\r\ninner regular. -/\r\n```",
                    "createdAt": "2023-11-08T14:51:54Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5SqBkz",
                    "body": "```suggestion\r\n  exact ⟨K, KF, hKp, hK.trans_le (restrict_apply_le _ _)⟩\r\n```",
                    "createdAt": "2023-11-08T14:52:21Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5SqDX7",
                    "body": "The previous theorem used `PseudoEMetricSpace`, the new one uses `PseudoMetrizableSpace`. You generalized metric to metrizable, ~~but you lost the E. Perhaps we should keep both?~~",
                    "createdAt": "2023-11-08T14:55:58Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5SqJYQ",
                    "body": "Forget about that: a PseudoEMetricSpace is a PseudoMetrizableSpace (by [UniformSpace.pseudoMetrizableSpace](https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Metrizable/Uniformity.html#UniformSpace.pseudoMetrizableSpace) and [EMetric.instIsCountablyGeneratedUniformity](https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/EMetricSpace/Basic.html#EMetric.instIsCountablyGeneratedUniformity)) so you lost nothing.",
                    "createdAt": "2023-11-08T15:12:25Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5SqEUg",
                    "body": "```suggestion\r\n  ⟨InnerRegularWRT.map h.innerRegular hf.aemeasurable (fun _s hs ↦ hf.measurable hs)\r\n```",
                    "createdAt": "2023-11-08T14:58:20Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5SqFcZ",
                    "body": "You lost the E of PseudoEMetricSpace here as well.",
                    "createdAt": "2023-11-08T15:01:20Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            }
          ]
        },
        "closingIssuesReferences": {
          "nodes": []
        },
        "participants": {
          "nodes": [
            {
              "id": "MDQ6VXNlcjEwODE4NDM0",
              "login": "sgouezel"
            },
            {
              "id": "MDQ6VXNlcjQwOTQ3MzI=",
              "login": "RemyDegenne"
            },
            {
              "id": "U_kgDOB75MNQ",
              "login": "leanprover-community-mathlib4-bot"
            }
          ]
        },
        "state": "CLOSED",
        "statusCheckRollup": null,
        "title": "[Merged by Bors] - feat: new class `InnerRegular` of measures",
        "updatedAt": "2023-11-09T00:36:36Z",
        "url": "https://github.com/leanprover-community/mathlib4/pull/8251",
        "timelineItems": {
          "nodes": [
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "b1a1a3e67c74b3ac7baa1b830bb483b8385c43f2"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "fd62a9cdcacc6a71db805470477d31bae736c8b9"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "16cda4cd7aecb1b317501bad12c3f5786c09beca"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "07a341210e645ca8c6c961394ab397eb38d869bd"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c52JIOrzwAAAAKJL5uG",
              "createdAt": "2023-11-07T19:48:59Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c52JIOrzwAAAAKJL5uK",
              "createdAt": "2023-11-07T19:48:59Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABViJbOw",
                "name": "t-topology"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c52JIOrzwAAAAKJL5uQ",
              "createdAt": "2023-11-07T19:48:59Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABViJqVA",
                "name": "t-measure-probability"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c5mfikg",
              "createdAt": "2023-11-08T07:16:05Z",
              "body": "",
              "author": {
                "login": "RemyDegenne"
              }
            },
            {
              "__typename": "CrossReferencedEvent",
              "id": "CRE_kwDOFcwZ1c5PQ1FM",
              "createdAt": "2023-11-08T07:38:45Z",
              "source": {
                "id": "PR_kwDOFcwZ1c5enUII",
                "title": "[Merged by Bors] - feat: uniqueness of Haar measure in general locally compact groups",
                "url": "https://github.com/leanprover-community/mathlib4/pull/8198"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "31f7c07c450a22ece7e906a311e921eb5afd306c"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c52JIOrzwAAAAKJiv0F",
              "createdAt": "2023-11-08T08:53:15Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABIFoUmw",
                "name": "merge-conflict"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "bf4c7a3bdc729dd80882940d61690dd1789e1dfb"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c52JIOrzwAAAAKJpNpm",
              "createdAt": "2023-11-08T11:07:22Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABIFoUmw",
                "name": "merge-conflict"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c5mjWcA",
              "createdAt": "2023-11-08T14:48:09Z",
              "body": "It looks good!",
              "author": {
                "login": "RemyDegenne"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "ff2a9e06a2b477195ebbf2eed4df5c96784d1b7f"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "0b08d812e2a56a4bc2b39ca9369c0351a4062d4c"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c5rdWeZ",
              "createdAt": "2023-11-08T23:05:50Z",
              "body": "Thanks!\r\nbors r+",
              "author": {
                "login": "RemyDegenne"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c52JIOrzwAAAAKKFwmA",
              "createdAt": "2023-11-08T23:06:01Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABHuWjJg",
                "name": "ready-to-merge"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c52JIOrzwAAAAKKFwnh",
              "createdAt": "2023-11-08T23:06:02Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "ReferencedEvent"
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c5rd01V",
              "createdAt": "2023-11-09T00:36:32Z",
              "body": "Pull request successfully merged into master.\n\nBuild succeeded:\n  * [Build](https://github.com/leanprover-community/mathlib4/actions/runs/6805434625/job/18504945358)\n  * [Check all files imported](https://github.com/leanprover-community/mathlib4/actions/runs/6805434625/job/18504945119)\n  * [Lint style](https://github.com/leanprover-community/mathlib4/actions/runs/6805434625/job/18504945249)",
              "author": {
                "login": "mathlib-bors"
              }
            },
            {
              "__typename": "RenamedTitleEvent"
            },
            {
              "__typename": "ClosedEvent",
              "id": "CE_lADOFcwZ1c52JIOrzwAAAAKKHlxD",
              "createdAt": "2023-11-09T00:36:33Z"
            },
            {
              "__typename": "HeadRefDeletedEvent",
              "id": "HRDE_lADOFcwZ1c52JIOrzwAAAAKKHl0o",
              "createdAt": "2023-11-09T00:36:36Z"
            },
            {
              "__typename": "ReferencedEvent"
            }
          ]
        }
      }
    }
  }
}
