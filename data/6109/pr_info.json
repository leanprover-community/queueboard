{
  "data": {
    "repository": {
      "pullRequest": {
        "additions": 99,
        "assignees": {
          "nodes": []
        },
        "author": {
          "login": "RemyDegenne"
        },
        "autoMergeRequest": null,
        "baseRefName": "master",
        "body": "`condexpKernel` is a Markov kernel, is strongly measurable and is a.e. equal to the conditional expectation.\r\n\r\n---\r\n<!-- The text above the `---` will become the commit message when your\r\nPR is merged. Please leave a blank newline before the `---`, otherwise\r\nGitHub will format the text above it as a title.\r\n\r\nTo indicate co-authors, include lines at the bottom of the commit message\r\n(that is, before the `---`) using the following format:\r\n\r\nCo-authored-by: Author Name <author@email.com>\r\n\r\nAny other comments you want to keep out of the PR commit should go\r\nbelow the `---`, and placed outside this HTML comment, or else they\r\nwill be invisible to reviewers.\r\n\r\nIf this PR depends on other PRs, please list them below this comment,\r\nusing the following format:\r\n- [ ] depends on: #abc [optional extra text]\r\n- [ ] depends on: #xyz [optional extra text]\r\n-->\r\n\r\n[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)\r\n",
        "changedFiles": 4,
        "closed": true,
        "closedAt": "2023-08-14T14:18:26Z",
        "comments": {
          "nodes": [
            {
              "id": "IC_kwDOFcwZ1c5j6f3X",
              "body": ":v: RemyDegenne can now approve this pull request. To approve and merge a pull request, simply reply with `bors r+`. More detailed instructions are available [here](https://bors.tech/documentation/getting-started/#reviewing-pull-requests).",
              "createdAt": "2023-08-13T08:26:19Z",
              "author": {
                "login": "bors"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c5j-B0N",
              "body": "bors r+",
              "createdAt": "2023-08-14T12:10:54Z",
              "author": {
                "login": "RemyDegenne"
              }
            },
            {
              "id": "IC_kwDOFcwZ1c5j-zJA",
              "body": "Pull request successfully merged into master.\n\n  Build succeeded!\n\n  The publicly hosted instance of bors-ng is deprecated and will go away soon.\n\n  If you want to self-host your own instance, [instructions are here][instructions].\n  For more help, visit [the forum].\n\n  If you want to switch to GitHub's built-in merge queue, visit [their help page][gh].\n\n  [instructions]: https://github.com/bors-ng/bors-ng#how-to-set-up-your-own-real-instance\n  [the forum]: https://forum.bors.tech\n  [gh]: https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-pull-request-merges/managing-a-merge-queue\n\n\n\n  * [Build](https://github.com/leanprover-community/mathlib4/actions/runs/5855987662/job/15874820675)\n  * [Check all files imported](https://github.com/leanprover-community/mathlib4/actions/runs/5855987662/job/15874820271)\n  * [Lint style](https://github.com/leanprover-community/mathlib4/actions/runs/5855987662/job/15874820473)",
              "createdAt": "2023-08-14T14:18:25Z",
              "author": {
                "login": "bors"
              }
            }
          ]
        },
        "commits": {
          "nodes": [
            {
              "commit": {
                "oid": "af3405ccc736fe39eef5be3e228aa484140c4cf7",
                "additions": 26,
                "deletions": 2,
                "committedDate": "2023-07-24T15:12:55Z",
                "author": {
                  "name": "RemyDegenne",
                  "email": "remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "556c5a105bbf26b84f29e1c3fb6b636e3913d5c2",
                "additions": 10,
                "deletions": 13,
                "committedDate": "2023-07-26T15:29:53Z",
                "author": {
                  "name": "RemyDegenne",
                  "email": "Remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "571a1e944582a826d0f8fbf50b0404c9cadcaef1",
                "additions": 3,
                "deletions": 3,
                "committedDate": "2023-07-26T15:44:59Z",
                "author": {
                  "name": "RemyDegenne",
                  "email": "Remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "9bf0fede2ebb513b5d01e991c7ab5cd57b8f105d",
                "additions": 3,
                "deletions": 0,
                "committedDate": "2023-07-31T08:07:52Z",
                "author": {
                  "name": "RemyDegenne",
                  "email": "Remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "77ce109be524257380df4fe2812b5d6014395db6",
                "additions": 47,
                "deletions": 30,
                "committedDate": "2023-07-31T08:08:05Z",
                "author": {
                  "name": "RemyDegenne",
                  "email": "Remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "8076d48a211e23857cc147783c8d91644a587a51",
                "additions": 31,
                "deletions": 19,
                "committedDate": "2023-08-10T10:40:39Z",
                "author": {
                  "name": "RemyDegenne",
                  "email": "Remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            },
            {
              "commit": {
                "oid": "191af8d12f53f6e43d3fe134e4f0578ce445f2f9",
                "additions": 1,
                "deletions": 1,
                "committedDate": "2023-08-14T11:55:42Z",
                "author": {
                  "name": "RÃ©my Degenne",
                  "email": "remydegenne@gmail.com"
                },
                "statusCheckRollup": null
              }
            }
          ]
        },
        "createdAt": "2023-07-24T15:15:43Z",
        "deletions": 46,
        "files": {
          "nodes": [
            {
              "path": "Mathlib/MeasureTheory/Function/ConditionalExpectation/AEMeasurable.lean",
              "additions": 3,
              "deletions": 0
            },
            {
              "path": "Mathlib/MeasureTheory/MeasurableSpace.lean",
              "additions": 4,
              "deletions": 0
            },
            {
              "path": "Mathlib/MeasureTheory/Measure/AEMeasurable.lean",
              "additions": 6,
              "deletions": 3
            },
            {
              "path": "Mathlib/Probability/Kernel/Condexp.lean",
              "additions": 86,
              "deletions": 43
            }
          ]
        },
        "headRefName": "RD_condexpkernel",
        "headRefOid": "191af8d12f53f6e43d3fe134e4f0578ce445f2f9",
        "headRepository": {
          "name": "mathlib4",
          "owner": {
            "login": "leanprover-community"
          }
        },
        "headRepositoryOwner": {
          "login": "leanprover-community"
        },
        "id": "PR_kwDOFcwZ1c5WPjfP",
        "isCrossRepository": false,
        "isDraft": false,
        "labels": {
          "nodes": [
            {
              "id": "LA_kwDOFcwZ1c8AAAABAt13Ow",
              "color": "bfd4f2",
              "name": "delegated"
            },
            {
              "id": "LA_kwDOFcwZ1c8AAAABHuWjJg",
              "color": "06e039",
              "name": "ready-to-merge"
            },
            {
              "id": "LA_kwDOFcwZ1c8AAAABViJqVA",
              "color": "33DBEC",
              "name": "t-measure-probability"
            }
          ]
        },
        "latestReviews": {
          "nodes": [
            {
              "id": "PRR_kwDOFcwZ1c5d67wn",
              "body": "bors d+\r\nThis looks very nice, thanks!",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-08-13T08:26:18Z"
            }
          ]
        },
        "maintainerCanModify": false,
        "mergeCommit": null,
        "mergeStateStatus": "DIRTY",
        "mergeable": "CONFLICTING",
        "mergedAt": null,
        "mergedBy": null,
        "milestone": null,
        "number": 6109,
        "potentialMergeCommit": null,
        "projectCards": {
          "nodes": []
        },
        "reactionGroups": [
          {
            "content": "THUMBS_UP",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "THUMBS_DOWN",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "LAUGH",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "HOORAY",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "CONFUSED",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "HEART",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "ROCKET",
            "users": {
              "nodes": []
            }
          },
          {
            "content": "EYES",
            "users": {
              "nodes": []
            }
          }
        ],
        "reviewDecision": null,
        "reviewRequests": {
          "nodes": []
        },
        "reviews": {
          "nodes": [
            {
              "id": "PRR_kwDOFcwZ1c5cBiS4",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-07-25T09:14:06Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5cRWNv",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-07-26T15:34:30Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5cozgS",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-07-31T08:15:56Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5czg96",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-08-01T13:36:50Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5drKzI",
              "body": "",
              "state": "COMMENTED",
              "author": {
                "login": "RemyDegenne"
              },
              "submittedAt": "2023-08-10T10:41:43Z"
            },
            {
              "id": "PRR_kwDOFcwZ1c5d67wn",
              "body": "bors d+\r\nThis looks very nice, thanks!",
              "state": "COMMENTED",
              "author": {
                "login": "sgouezel"
              },
              "submittedAt": "2023-08-13T08:26:18Z"
            }
          ]
        },
        "reviewThreads": {
          "nodes": [
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5L2Tug",
                    "body": "Could you take advantage of this PR to move to their place the lemmas of the section `AuxLemmas` at the beginning of this file?",
                    "createdAt": "2023-07-24T17:02:59Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5L4_ws",
                    "body": "There are many assumptions `(hm : m â¤ mÎ©)` in this file. I have the impression that some of them could be removed by tweaking the definition as follows: first use the current definition but with the intersected sigma algebra `m â mÎ©` (this gives a kernel which is measurable from `m â mÎ©` to `mÎ©`) and then notice that such a kernel is in fact measurable from `m` to `mÎ©`. Do you think this would make sense?\r\n\r\n(Note that `hm` would still be necessary in this lemma and the next ones, but it could be removed from all the measurability and integrability results)\r\n\r\n(Another more radical refactor would be to change the definition of conditional expectation to let it match this, by using `m â m0` when `m` is not contained in `m0` instead of setting everything to `0` in this case. And maybe even in the definition of `Measure.trim`. I'd be curious to hear your thoughts about that).",
                    "createdAt": "2023-07-25T09:05:10Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5MAU9B",
                    "body": "Thinking back about this, we definitely shouldn't change `Measure.trim`, as we really want to have a measure on the sigma-algebra `m` by definition, not on `m â m0` (which might coincide with `m` in good situations, but not definitionally).",
                    "createdAt": "2023-07-26T15:34:29Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5MOxVP",
                    "body": "I changed the definition of `condexpKernel` to use the inf. It indeed saves many `m â¤ mÎ©` assumptions and I don't see any drawback. I added a new lemma `AEStronglyMeasurable'.mono` to help in a proof.\r\n\r\nIt might be that changing `condexp` in the same way would also remove some assumptions, but that is a big change impacting many files and I don't have the courage to try that now.\r\n\r\nI agree that we don't want to do that for `Measure.trim`.",
                    "createdAt": "2023-07-31T08:15:56Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5MVSCy",
                    "body": "Can't you reinterpret it as a kernel from `m` to `mÎ©`? (So that it has the right type `@kernel Î© Î© m mÎ©` from the start, and the user never needs to worry about `m â mÎ©`?) ",
                    "createdAt": "2023-08-01T13:28:33Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  },
                  {
                    "id": "PRRC_kwDOFcwZ1c5M4te-",
                    "body": "I added a `kernel.comap` to the definition to turn it into a kernel from `m` to `mÎ©`.",
                    "createdAt": "2023-08-10T10:41:43Z",
                    "author": {
                      "login": "RemyDegenne"
                    }
                  }
                ]
              }
            },
            {
              "comments": {
                "nodes": [
                  {
                    "id": "PRRC_kwDOFcwZ1c5NDUNX",
                    "body": "```suggestion\r\n  exact AEStronglyMeasurable.integral_condDistrib\r\n```",
                    "createdAt": "2023-08-13T08:26:05Z",
                    "author": {
                      "login": "sgouezel"
                    }
                  }
                ]
              }
            }
          ]
        },
        "closingIssuesReferences": {
          "nodes": []
        },
        "participants": {
          "nodes": [
            {
              "id": "MDQ6VXNlcjQwOTQ3MzI=",
              "login": "RemyDegenne"
            },
            {
              "id": "MDQ6VXNlcjEwODE4NDM0",
              "login": "sgouezel"
            },
            {
              "id": "U_kgDOB75MNQ",
              "login": "leanprover-community-mathlib4-bot"
            }
          ]
        },
        "state": "CLOSED",
        "statusCheckRollup": null,
        "title": "[Merged by Bors] - feat(Probability/Kernel/Condexp): some properties of condexpKernel",
        "updatedAt": "2023-08-14T14:18:41Z",
        "url": "https://github.com/leanprover-community/mathlib4/pull/6109",
        "timelineItems": {
          "nodes": [
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "af3405ccc736fe39eef5be3e228aa484140c4cf7"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJOLXri",
              "createdAt": "2023-07-24T15:15:43Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJOLXrt",
              "createdAt": "2023-07-24T15:15:43Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABViJqVA",
                "name": "t-measure-probability"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c5cBiS4",
              "createdAt": "2023-07-24T17:02:59Z",
              "body": "",
              "author": {
                "login": "sgouezel"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c5sZiATzwAAAAJOoXlg",
              "createdAt": "2023-07-25T09:14:15Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJOoXll",
              "createdAt": "2023-07-25T09:14:15Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7P265b",
                "name": "awaiting-author"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "556c5a105bbf26b84f29e1c3fb6b636e3913d5c2"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "571a1e944582a826d0f8fbf50b0404c9cadcaef1"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "9bf0fede2ebb513b5d01e991c7ab5cd57b8f105d"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "77ce109be524257380df4fe2812b5d6014395db6"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c5sZiATzwAAAAJRtMsz",
              "createdAt": "2023-07-31T08:18:08Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7P265b",
                "name": "awaiting-author"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJRtMs5",
              "createdAt": "2023-07-31T08:18:08Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c5czg96",
              "createdAt": "2023-08-01T13:28:33Z",
              "body": "",
              "author": {
                "login": "sgouezel"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c5sZiATzwAAAAJSqVTF",
              "createdAt": "2023-08-01T13:37:03Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJSqVTM",
              "createdAt": "2023-08-01T13:37:03Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7P265b",
                "name": "awaiting-author"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "8076d48a211e23857cc147783c8d91644a587a51"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c5sZiATzwAAAAJXfiao",
              "createdAt": "2023-08-10T10:41:07Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7P265b",
                "name": "awaiting-author"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJXfia0",
              "createdAt": "2023-08-10T10:41:07Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "PullRequestReview",
              "id": "PRR_kwDOFcwZ1c5d67wn",
              "createdAt": "2023-08-13T08:26:05Z",
              "body": "bors d+\r\nThis looks very nice, thanks!",
              "author": {
                "login": "sgouezel"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c5j6f3X",
              "createdAt": "2023-08-13T08:26:19Z",
              "body": ":v: RemyDegenne can now approve this pull request. To approve and merge a pull request, simply reply with `bors r+`. More detailed instructions are available [here](https://bors.tech/documentation/getting-started/#reviewing-pull-requests).",
              "author": {
                "login": "bors"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJYxsnu",
              "createdAt": "2023-08-13T08:26:32Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABAt13Ow",
                "name": "delegated"
              }
            },
            {
              "__typename": "UnlabeledEvent",
              "id": "UNLE_lADOFcwZ1c5sZiATzwAAAAJYxsn9",
              "createdAt": "2023-08-13T08:26:33Z",
              "label": {
                "id": "LA_kwDOFcwZ1c7ECuhA",
                "name": "awaiting-review"
              }
            },
            {
              "__typename": "PullRequestCommit",
              "commit": {
                "oid": "191af8d12f53f6e43d3fe134e4f0578ce445f2f9"
              }
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c5j-B0N",
              "createdAt": "2023-08-14T12:10:54Z",
              "body": "bors r+",
              "author": {
                "login": "RemyDegenne"
              }
            },
            {
              "__typename": "LabeledEvent",
              "id": "LE_lADOFcwZ1c5sZiATzwAAAAJZKnPu",
              "createdAt": "2023-08-14T12:11:07Z",
              "label": {
                "id": "LA_kwDOFcwZ1c8AAAABHuWjJg",
                "name": "ready-to-merge"
              }
            },
            {
              "__typename": "ReferencedEvent"
            },
            {
              "__typename": "IssueComment",
              "id": "IC_kwDOFcwZ1c5j-zJA",
              "createdAt": "2023-08-14T14:18:25Z",
              "body": "Pull request successfully merged into master.\n\n  Build succeeded!\n\n  The publicly hosted instance of bors-ng is deprecated and will go away soon.\n\n  If you want to self-host your own instance, [instructions are here][instructions].\n  For more help, visit [the forum].\n\n  If you want to switch to GitHub's built-in merge queue, visit [their help page][gh].\n\n  [instructions]: https://github.com/bors-ng/bors-ng#how-to-set-up-your-own-real-instance\n  [the forum]: https://forum.bors.tech\n  [gh]: https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-pull-request-merges/managing-a-merge-queue\n\n\n\n  * [Build](https://github.com/leanprover-community/mathlib4/actions/runs/5855987662/job/15874820675)\n  * [Check all files imported](https://github.com/leanprover-community/mathlib4/actions/runs/5855987662/job/15874820271)\n  * [Lint style](https://github.com/leanprover-community/mathlib4/actions/runs/5855987662/job/15874820473)",
              "author": {
                "login": "bors"
              }
            },
            {
              "__typename": "RenamedTitleEvent"
            },
            {
              "__typename": "ClosedEvent",
              "id": "CE_lADOFcwZ1c5sZiATzwAAAAJZQGJf",
              "createdAt": "2023-08-14T14:18:27Z"
            },
            {
              "__typename": "HeadRefDeletedEvent",
              "id": "HRDE_lADOFcwZ1c5sZiATzwAAAAJZQHNc",
              "createdAt": "2023-08-14T14:18:41Z"
            },
            {
              "__typename": "ReferencedEvent"
            },
            {
              "__typename": "ReferencedEvent"
            },
            {
              "__typename": "ReferencedEvent"
            }
          ]
        }
      }
    }
  }
}
